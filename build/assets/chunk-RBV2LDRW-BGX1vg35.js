import{u as N}from"./chunk-C76H5USB-qWdDTOoY.js";import{T as R,L as w}from"./chunk-XIMVTANT-biTHDTmX.js";import{D as b}from"./chunk-RKBIB2RM-jqr0zPdv.js";import{a as S,N as T}from"./chunk-WX2SMNCD-D4nWbVrW.js";import{j as e,cB as C,L as M,d as _,r as j}from"./index-7A3rjJyE.js";import{u as I,g as z,a as B}from"./index-DL2eSRCZ.js";import{B as L}from"./label-DDCdtDlT.js";var J=({prefix:g,pageSize:n=20})=>{const t=N(["offset","q","order","created_at","updated_at"],g),{offset:r,q:a,order:m,created_at:o,updated_at:s}=t;return{searchParams:{limit:n,offset:r?Number(r):0,order:m,created_at:o?JSON.parse(o):void 0,updated_at:s?JSON.parse(s):void 0,q:a},raw:t}},$=({variant:g="country",isPending:n,action:t,count:r=0,table:a,queryObject:m,prefix:o,children:s})=>{if(n)return e.jsxs("div",{className:"flex flex-col divide-y",children:[Array.from({length:3}).map((l,c)=>e.jsx("div",{className:"bg-ui-bg-field-component h-[52px] w-full animate-pulse"},c)),e.jsx(C,{layout:"fit"})]});const i=Object.values(m).filter(l=>!!l).length===0,u=!n&&r===0&&!i,d=!n&&r===0&&i,{pageIndex:f,pageSize:p}=a.getState().pagination;return e.jsxs("div",{className:"flex flex-col divide-y",children:[e.jsxs("div",{className:"flex flex-col justify-between gap-x-4 gap-y-3 px-6 py-4 md:flex-row md:items-center",children:[e.jsx("div",{children:s}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[!d&&e.jsx("div",{className:"flex w-full items-center gap-x-2 md:w-fit",children:e.jsx(b,{keys:["updated_at","created_at"],prefix:o})}),e.jsx(M,{to:t.to,children:e.jsx(L,{size:"small",variant:"secondary",children:t.label})})]})]}),u&&e.jsx(S,{}),d&&e.jsx(T,{}),!d&&!u?n?Array.from({length:3}).map((l,c)=>e.jsx("div",{className:"bg-ui-bg-field-component h-[60px] w-full animate-pulse"},c)):a.getRowModel().rows.map(l=>e.jsx(R,{variant:g,taxRegion:l.original,role:"row","aria-rowindex":l.index},l.id)):null,!d&&e.jsx(w,{prefix:o,canNextPage:a.getCanNextPage(),canPreviousPage:a.getCanPreviousPage(),count:r,nextPage:a.nextPage,previousPage:a.previousPage,pageCount:a.getPageCount(),pageIndex:f,pageSize:p})]})},F=({data:g=[],count:n=0,pageSize:t=10,prefix:r})=>{const[a,m]=_(),o=`${r?`${r}_`:""}offset`,s=a.get(o),[{pageIndex:i,pageSize:u},d]=j.useState({pageIndex:s?Math.ceil(Number(s)/t):0,pageSize:t}),f=j.useMemo(()=>({pageIndex:i,pageSize:u}),[i,u]);j.useEffect(()=>{const c=s?Math.ceil(Number(s)/t):0;c!==i&&d(x=>({...x,pageIndex:c}))},[s,t,i]);const p=c=>{const x=c(f),{pageIndex:P,pageSize:y}=x;return m(h=>{if(!P)return h.delete(o),h;const v=new URLSearchParams(h);return v.set(o,String(P*y)),v}),d(x),x};return{table:I({data:g,columns:[],pageCount:Math.ceil(n/u),state:{pagination:f},getCoreRowModel:z(),onPaginationChange:p,getPaginationRowModel:B(),manualPagination:!0})}};export{$ as T,F as a,J as u};
