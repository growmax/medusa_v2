import{a as _,b as w,T as E,u as D,c as N,d as O}from"./before-CoQTlsvP.js";import{u as z,a as C,T as A}from"./chunk-RBV2LDRW-BGX1vg35.js";import{T as B}from"./chunk-XIMVTANT-biTHDTmX.js";import{v as I,r as b,h as k,cH as L,j as e,u as d,C as u,x as H,B as q,cA as F,cI as T,H as R,T as h,k as S}from"./index-7A3rjJyE.js";import{cJ as Ie}from"./index-7A3rjJyE.js";import{S as G}from"./chunk-FGHVNTU2-HfmduO2_.js";import"./chunk-3IW4HYUP-C89ww9p0.js";import{a as J}from"./chunk-DBDBBAQF-CuodlkG0.js";import"./lodash-8s6kkRaG.js";import{A as Q}from"./alert-Db7IDcs0.js";import{B as g}from"./label-DDCdtDlT.js";import"./chunk-C76H5USB-qWdDTOoY.js";import"./chunk-VNYVDWWH-BElGsP_6.js";import"./chunk-7TY4Y7TY-B3QhHT0B.js";import"./chunk-YBHG7T6S-BleHOTgO.js";import"./chunk-DMYZ6SLX-BMyt3Z-P.js";import"./chunk-YVTBRLIE-C161Iqr5.js";import"./chunk-RYVWLLZ2-BlkKIhzO.js";import"./chunk-WRXTMI2J-CygmDunM.js";import"./chunk-OPYB3EPU-B_-LG2wj.js";import"./chunk-5FUV23JF-QRqJ2E8j.js";import"./chunk-RKBIB2RM-jqr0zPdv.js";import"./chunk-WX2SMNCD-D4nWbVrW.js";import"./plus-mini-BHxdUq8n.js";import"./index-DL2eSRCZ.js";import"./pencil-square-mUSTT5rR.js";import"./trash-C_lucST6.js";import"./arrow-down-right-mini-XNsj1UGy.js";import"./status-badge-BK5p0WUV.js";import"./chunk-EQTBJSBZ-b_1V6fJN.js";import"./react-country-flag.esm-unq-jaIv.js";import"./plus-o2nCfN-i.js";import"./use-prompt-iL3FbEo4.js";import"./prompt-KZNvJYzq.js";import"./arrow-up-right-on-box-CF7GLQ-o.js";import"./Trans-Cyi6soNY.js";import"./x-mark-mini-Di7jARRp.js";import"./triangle-down-mini-BHNqpDM0.js";import"./square-two-stack-Ao9P_yLE.js";var X=({taxRegion:r})=>{const{t:s}=d(),i=r.tax_rates.filter(a=>a.is_default===!0),t=i.length===0;return e.jsxs(u,{className:"divide-y p-0",children:[e.jsx(B,{taxRegion:r,type:"header",asLink:!1,badge:t&&e.jsx(H,{content:s("taxRegions.fields.noDefaultRate.tooltip"),children:e.jsx(q,{color:"orange",size:"2xsmall",className:"cursor-default",children:s("taxRegions.fields.noDefaultRate.label")})})}),i.map(a=>e.jsx(E,{taxRate:a},a.id))]})},f=10,v="p",Z=({taxRegion:r,showSublevelRegions:s})=>{const{t:i}=d(),{searchParams:t,raw:a}=z({pageSize:f,prefix:v}),{tax_regions:o,count:n,isPending:l,isError:p,error:m}=F({...t,parent_id:r.id},{placeholderData:S}),{table:y}=C({count:n,data:o,pageSize:f,prefix:v}),c=T(r.country_code);if(!c&&!s&&!r.children.length)return null;const P=(c==null?void 0:c.type)||"sublevel";if(p)throw m;return e.jsx(u,{className:"divide-y p-0",children:e.jsx(A,{variant:"province",action:{to:"provinces/create",label:i("actions.create")},table:y,isPending:l,queryObject:a,count:n,children:e.jsx(R,{level:"h2",children:i(`taxRegions.${P}.header`)})})})},j=10,x="o",$=({taxRegion:r})=>{const{t:s}=d(),{searchParams:i,raw:t}=D({pageSize:j,prefix:x}),{tax_rates:a,count:o,isPending:n,isError:l,error:p}=J({...i,tax_region_id:r.id,is_default:!1},{placeholderData:S}),{table:m}=N({count:o,data:a,pageSize:j,prefix:x});if(l)throw p;return e.jsx(u,{className:"p-0",children:e.jsx(O,{isPending:n,table:m,count:o,action:{label:s("actions.create"),to:"overrides/create"},queryObject:t,prefix:x,children:e.jsx(R,{level:"h2",children:s("taxRegions.taxOverrides.header")})})})},K=({taxRegion:r,showSublevelRegions:s,setShowSublevelRegions:i})=>{const{t}=d(),[a,o]=b.useState(!1);return T(r.country_code)||s||a||r.children.length?null:e.jsx(Q,{dismissible:!0,variant:"info",className:"bg-ui-bg-base",children:e.jsxs("div",{className:"flex flex-col gap-y-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx(h,{size:"small",leading:"compact",weight:"plus",asChild:!0,children:e.jsx("h2",{children:t("taxRegions.fields.sublevels.alert.header")})}),e.jsx(h,{size:"small",leading:"compact",className:"text-pretty",children:t("taxRegions.fields.sublevels.alert.description")})]}),e.jsxs("div",{className:"flex items-center gap-x-3",children:[e.jsx(g,{variant:"secondary",size:"small",onClick:()=>i(!0),children:t("taxRegions.fields.sublevels.alert.action")}),e.jsx(g,{variant:"transparent",size:"small",onClick:()=>o(!0),children:t("actions.hide")})]})]})})},Ce=()=>{const{id:r}=I(),[s,i]=b.useState(!1),t=k(),{tax_region:a,isLoading:o,isError:n,error:l}=L(r,void 0,{initialData:t});if(o||!a)return e.jsx("div",{children:"Loading..."});if(n)throw l;return e.jsxs(G,{data:a,showJSON:!0,hasOutlet:!0,widgets:{after:_,before:w},children:[e.jsx(K,{taxRegion:a,showSublevelRegions:s,setShowSublevelRegions:i}),e.jsx(X,{taxRegion:a}),e.jsx(Z,{taxRegion:a,showSublevelRegions:s}),e.jsx($,{taxRegion:a})]})};export{Ce as Component,Ce as TaxRegionDetail,Ie as loader};
