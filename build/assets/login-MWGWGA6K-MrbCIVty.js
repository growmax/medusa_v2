import{L as y}from"./chunk-6M6I2YQR-BGhNhkr8.js";import{u as N,a as E,b as L,c as C,j as e,H as T,T as A,I as p,D as F,L as S}from"./index-7A3rjJyE.js";import{u as I,F as s}from"./chunk-C7RYT3S3-C_x8NvOf.js";import{t as B}from"./zod-DRKIF09R.js";import{o as P,s as f}from"./index-yuYasa5Y.js";import{A as k}from"./alert-Db7IDcs0.js";import{T as D}from"./Trans-Cyi6soNY.js";import{B as H}from"./label-DDCdtDlT.js";import"./motion-UqVoX3oU.js";import"./x-mark-mini-Di7jARRp.js";const M={widgets:[]},z={widgets:[]};var K=r=>r.isAxiosError,R=P({email:f().email(),password:f()}),Y=()=>{var n,l,m,c,d;const{t:r}=N(),j=E(),g=L(),h=((l=(n=j.state)==null?void 0:n.from)==null?void 0:l.pathname)||"/orders",a=I({resolver:B(R),defaultValues:{email:"",password:""}}),{mutateAsync:v,isPending:w}=C(),b=a.handleSubmit(async({email:t,password:o})=>{var x;try{await v({email:t,password:o}),g(h,{replace:!0})}catch(u){if(K(u)&&((x=u.response)==null?void 0:x.status)===401){a.setError("email",{type:"manual"}),a.setError("password",{type:"manual",message:r("errors.invalidCredentials")});return}a.setError("root.serverError",{type:"manual",message:r("errors.serverError")})}}),i=(d=(c=(m=a.formState.errors)==null?void 0:m.root)==null?void 0:c.serverError)==null?void 0:d.message;return e.jsx("div",{className:"bg-ui-bg-base flex min-h-dvh w-dvw items-center justify-center",children:e.jsxs("div",{className:"m-4 flex w-full max-w-[300px] flex-col items-center",children:[e.jsx(y,{className:"mb-4"}),e.jsxs("div",{className:"mb-4 flex flex-col items-center",children:[e.jsx(T,{children:r("login.title")}),e.jsx(A,{size:"small",className:"text-ui-fg-subtle text-center",children:r("login.hint")})]}),e.jsxs("div",{className:"flex w-full flex-col gap-y-3",children:[z.widgets.map((t,o)=>e.jsx("div",{children:e.jsx(t.Component,{})},o)),e.jsxs(s,{...a,children:[e.jsxs("form",{onSubmit:b,className:"flex w-full flex-col gap-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsx(s.Field,{control:a.control,name:"email",render:({field:t})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:r("fields.email")}),e.jsx(s.Control,{children:e.jsx(p,{autoComplete:"email",...t})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:a.control,name:"password",render:({field:t})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:r("fields.password")}),e.jsx(s.Control,{children:e.jsx(p,{type:"password",autoComplete:"current-password",...t})}),e.jsx(s.ErrorMessage,{})]})})]}),e.jsx(H,{className:"w-full",type:"submit",isLoading:w,children:r("actions.continue")})]}),i&&e.jsx(k,{className:"mt-4",dismissible:!0,variant:"error",children:i})]}),M.widgets.map((t,o)=>e.jsx("div",{children:e.jsx(t.Component,{})},o))]}),e.jsx(F,{variant:"dashed",className:"my-6"}),e.jsx("span",{className:"text-ui-fg-subtle txt-small",children:e.jsx(D,{i18nKey:"login.forgotPassword",components:[e.jsx(S,{to:"/reset-password",className:"text-ui-fg-interactive transition-fg hover:text-ui-fg-interactive-hover focus-visible:text-ui-fg-interactive-hover outline-none"},"reset-password-link")]})})]})})};export{Y as Component};
