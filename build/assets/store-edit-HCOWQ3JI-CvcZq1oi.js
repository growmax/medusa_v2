import{u as g,m as v,j as e,H as b,co as F,t as p,I as E}from"./index-7A3rjJyE.js";import{u as I}from"./chunk-QHCOJC4V-B0yC0oe2.js";import{a as l,u as L}from"./chunk-BHGSRQH6-2xCUuk1R.js";import{u as R,F as r}from"./chunk-C7RYT3S3-C_x8NvOf.js";import{t as V}from"./zod-DRKIF09R.js";import{z as u}from"./index-yuYasa5Y.js";import{S as n}from"./select-cXhfXDq8.js";import{B as _}from"./label-DDCdtDlT.js";import"./prompt-KZNvJYzq.js";import"./index-dBm6oMZZ.js";import"./triangles-mini-JWkpofVU.js";var z=u.object({name:u.string().min(1),default_currency_code:u.string().optional(),default_region_id:u.string().optional()}),M=({store:i})=>{var h,f;const{t:o}=g(),{handleSuccess:m}=L(),d=R({defaultValues:{name:i.name,default_region_id:i.default_region_id||void 0,default_currency_code:((f=(h=i.supported_currencies)==null?void 0:h.find(s=>s.is_default))==null?void 0:f.currency_code)||void 0},resolver:V(z)}),{mutateAsync:x,isPending:j}=F(i.id),{regions:y,isPending:C}=I({limit:999}),S=d.handleSubmit(async s=>{var t;const c={...s,default_currency_code:void 0,supported_currencies:(t=i.supported_currencies)==null?void 0:t.map(a=>({...a,is_default:a.currency_code===s.default_currency_code}))};await x(c,{onSuccess:()=>{p.success(o("store.toast.update")),m()},onError:a=>{p.error(a.message)}})});return e.jsx(l.Form,{form:d,children:e.jsxs("form",{onSubmit:S,className:"flex h-full flex-col",children:[e.jsx(l.Body,{children:e.jsxs("div",{className:"flex flex-col gap-y-8",children:[e.jsx(r.Field,{control:d.control,name:"name",render:({field:s})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{children:o("fields.name")}),e.jsx(r.Control,{children:e.jsx(E,{placeholder:"ACME",...s})}),e.jsx(r.ErrorMessage,{})]})}),e.jsx(r.Field,{control:d.control,name:"default_currency_code",render:({field:{onChange:s,...c}})=>{var t;return e.jsxs(r.Item,{children:[e.jsx(r.Label,{children:o("store.defaultCurrency")}),e.jsx(r.Control,{children:e.jsxs(n,{...c,onValueChange:s,children:[e.jsx(n.Trigger,{ref:c.ref,children:e.jsx(n.Value,{})}),e.jsx(n.Content,{children:(t=i.supported_currencies)==null?void 0:t.map(a=>e.jsx(n.Item,{value:a.currency_code,children:a.currency_code.toUpperCase()},a.currency_code))})]})})]})}}),e.jsx(r.Field,{control:d.control,name:"default_region_id",render:({field:{onChange:s,...c}})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{children:o("store.defaultRegion")}),e.jsx(r.Control,{children:e.jsxs(n,{...c,onValueChange:s,disabled:C,children:[e.jsx(n.Trigger,{ref:c.ref,children:e.jsx(n.Value,{})}),e.jsx(n.Content,{children:(y||[]).map(t=>e.jsx(n.Item,{value:t.id,children:t.name},t.id))})]})})]})})]})}),e.jsx(l.Footer,{children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(l.Close,{asChild:!0,children:e.jsx(_,{size:"small",variant:"secondary",children:o("actions.cancel")})}),e.jsx(_,{size:"small",isLoading:j,type:"submit",children:o("actions.save")})]})})]})})},q=()=>{const{t:i}=g(),{store:o,isPending:m,isError:d,error:x}=v();if(d)throw x;const j=!!o&&!m;return e.jsxs(l,{children:[e.jsx(l.Header,{children:e.jsx(b,{children:i("store.edit.header")})}),j&&e.jsx(M,{store:o})]})};export{q as Component};
