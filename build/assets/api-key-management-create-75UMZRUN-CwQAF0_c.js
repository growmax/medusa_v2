import{g as w}from"./chunk-G22WWLPG-C9g-VuwI.js";import{c as C}from"./chunk-JVT2BXDL-CkNmt2FE.js";import{a as S,j as e,r as p,u as M,t as o,H as N,T as f,I as T,cx as F,cy as H}from"./index-7A3rjJyE.js";import{R as n,u as k}from"./chunk-BHGSRQH6-2xCUuk1R.js";import{u as A,F as i}from"./chunk-C7RYT3S3-C_x8NvOf.js";import{t as R}from"./zod-DRKIF09R.js";import{o as z,s as E}from"./index-yuYasa5Y.js";import{B as u}from"./label-DDCdtDlT.js";import{P as r}from"./prompt-KZNvJYzq.js";import"./chunk-TQZNQHGA-CqGicYvo.js";import"./chunk-YBHG7T6S-BleHOTgO.js";import"./chunk-DMYZ6SLX-BMyt3Z-P.js";var P=z({title:E().min(1)});function $(a){if(!a)return"";const s=a.slice(0,4),l=a.slice(-2);return`${s}${"â€¢".repeat(a.length-6)}${l}`}var B=({keyType:a})=>{const[s,l]=p.useState(null),[d,g]=p.useState(!0),{t}=M(),{handleSuccess:h}=k(),m=A({defaultValues:{title:""},resolver:R(P)}),{mutateAsync:j,isPending:y}=C(),b=m.handleSubmit(async x=>{await j({title:x.title,type:a},{onSuccess:({api_key:c})=>{switch(o.success(t("apiKeyManagement.create.successToast")),a){case"publishable":h(`/settings/publishable-api-keys/${c.id}`);break;case"secret":l(c);break}},onError:c=>{o.error(c.message)}})}),v=()=>{s||o.error(t("apiKeyManagement.create.copySecretTokenFailure")),navigator.clipboard.writeText((s==null?void 0:s.token)??""),o.success(t("apiKeyManagement.create.copySecretTokenSuccess"))},K=()=>{s&&h(`/settings/secret-api-keys/${s.id}`)};return e.jsxs(p.Fragment,{children:[e.jsx(n.Form,{form:m,children:e.jsxs("form",{className:"flex h-full flex-col overflow-hidden",onSubmit:b,children:[e.jsx(n.Header,{children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(n.Close,{asChild:!0,children:e.jsx(u,{size:"small",variant:"secondary",children:t("actions.cancel")})}),e.jsx(u,{size:"small",type:"submit",isLoading:y,children:t("actions.save")})]})}),e.jsx(n.Body,{className:"flex flex-1 flex-col overflow-hidden",children:e.jsx("div",{className:"flex flex-1 flex-col items-center overflow-y-auto",children:e.jsxs("div",{className:"flex w-full max-w-[720px] flex-col gap-y-8 px-2 py-16",children:[e.jsxs("div",{children:[e.jsx(N,{children:t(a==="publishable"?"apiKeyManagement.create.createPublishableHeader":"apiKeyManagement.create.createSecretHeader")}),e.jsx(f,{size:"small",className:"text-ui-fg-subtle",children:t(a==="publishable"?"apiKeyManagement.create.createPublishableHint":"apiKeyManagement.create.createSecretHint")})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsx(i.Field,{control:m.control,name:"title",render:({field:x})=>e.jsxs(i.Item,{children:[e.jsx(i.Label,{children:t("fields.title")}),e.jsx(i.Control,{children:e.jsx(T,{...x})}),e.jsx(i.ErrorMessage,{})]})})})]})})})]})}),e.jsx(r,{variant:"confirmation",open:!!s,children:e.jsxs(r.Content,{className:"w-fit max-w-[42.5%]",children:[e.jsxs(r.Header,{children:[e.jsx(r.Title,{children:t("apiKeyManagement.create.secretKeyCreatedHeader")}),e.jsx(r.Description,{children:t("apiKeyManagement.create.secretKeyCreatedHint")})]}),e.jsxs("div",{className:"flex flex-col gap-y-3 px-6 py-4",children:[e.jsxs("div",{className:"shadow-borders-base bg-ui-bg-component grid h-8 grid-cols-[1fr_32px] items-center overflow-hidden rounded-md",children:[e.jsx("div",{className:"flex items-center px-2",children:e.jsx(f,{family:"mono",size:"small",children:d?$(s==null?void 0:s.token):s==null?void 0:s.token})}),e.jsx("button",{className:"transition-fg hover:bg-ui-bg-base-hover active:bg-ui-bg-base-pressed text-ui-fg-muted active:text-ui-fg-subtle flex size-8 appearance-none items-center justify-center border-l",type:"button",onClick:()=>g(!d),children:d?e.jsx(F,{}):e.jsx(H,{})})]}),e.jsx(u,{size:"small",variant:"secondary",type:"button",className:"w-full",onClick:v,children:t("apiKeyManagement.actions.copy")})]}),e.jsx(r.Footer,{className:"border-t py-4",children:e.jsx(r.Action,{onClick:K,children:t("actions.continue")})})]})})]})},Y=()=>{const{pathname:a}=S(),s=w(a);return e.jsx(n,{children:e.jsx(B,{keyType:s})})};export{Y as Component};
