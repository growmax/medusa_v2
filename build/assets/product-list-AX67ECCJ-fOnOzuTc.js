import{u as v}from"./chunk-QBDU475K-BjRzsrqf.js";import{q as P,j as e,s as b,u as x,a as C,h as T,k as w,C as D,H as L,L as d,O as q,r as S,t as p}from"./index-7A3rjJyE.js";import{u as E,a as k}from"./chunk-OGPZJ7JQ-9Z-hWx5h.js";import{A as z}from"./chunk-WRXTMI2J-CygmDunM.js";import{u as A,D as Q}from"./chunk-MOFW5DA3-Byx5Qi5u.js";import"./lodash-8s6kkRaG.js";import"./chunk-7LAPOKHJ-BtMb3RyP.js";import"./chunk-M566SHKI-Cmdx6k9x.js";import{p as H,u as N,a as R}from"./chunk-YBHG7T6S-BleHOTgO.js";import{P as B}from"./pencil-square-mUSTT5rR.js";import{T as K}from"./trash-C_lucST6.js";import{u as M}from"./use-prompt-iL3FbEo4.js";import{B as m}from"./label-DDCdtDlT.js";import{c as O}from"./index-DL2eSRCZ.js";import"./chunk-6XHB4MRO-DKQXmGFz.js";import"./chunk-PHMALPVO-EKeNghx2.js";import"./chunk-ADOCJB6L-3PFdxvdK.js";import"./chunk-P3UUX2T6-Bigsa15J.js";import"./chunk-OPYB3EPU-B_-LG2wj.js";import"./chunk-C76H5USB-qWdDTOoY.js";import"./chunk-TQZNQHGA-CqGicYvo.js";import"./chunk-5FUV23JF-QRqJ2E8j.js";import"./chunk-RKBIB2RM-jqr0zPdv.js";import"./chunk-WX2SMNCD-D4nWbVrW.js";import"./plus-mini-BHxdUq8n.js";import"./command-bar-DBncXrlJ.js";import"./index-DFaNeppw.js";import"./chunk-QAF7PVQE-exoP4XGT.js";import"./format-CkWRMO1y.js";import"./_baseIsEqual-D9C7gzzJ.js";import"./date-picker-foikjjE_.js";import"./clsx-B-dksMZM.js";import"./x-mark-mini-Di7jARRp.js";import"./chunk-DMYZ6SLX-BMyt3Z-P.js";import"./prompt-KZNvJYzq.js";const _={widgets:[]},$={widgets:[]};var F=()=>({queryKey:H.list({limit:20,offset:0}),queryFn:async()=>b.admin.product.list({limit:20,offset:0})}),Ee=s=>async()=>{const t=F();return P.getQueryData(t.queryKey)??await s.fetchQuery(t)},c=20,I=()=>{const{t:s}=x(),t=C(),r=T(),{searchParams:a,raw:i}=E({pageSize:c}),{products:l,count:o,isLoading:f,isError:y,error:h}=N({...a},{initialData:r,placeholderData:w}),j=k(),u=Y(),{table:g}=A({data:l??[],columns:u,count:o,enablePagination:!0,pageSize:c,getRowId:n=>n.id});if(y)throw h;return e.jsxs(D,{className:"divide-y p-0",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsx(L,{level:"h2",children:s("products.domain")}),e.jsxs("div",{className:"flex items-center justify-center gap-x-2",children:[e.jsx(m,{size:"small",variant:"secondary",asChild:!0,children:e.jsx(d,{to:`export${t.search}`,children:s("actions.export")})}),e.jsx(m,{size:"small",variant:"secondary",asChild:!0,children:e.jsx(d,{to:"create",children:s("actions.create")})})]})]}),e.jsx(Q,{table:g,columns:u,count:o,pageSize:c,filters:j,search:!0,pagination:!0,isLoading:f,queryObject:i,navigateTo:n=>`${n.original.id}`,orderBy:["title","created_at","updated_at"],noRecords:{message:s("products.list.noRecordsMessage")}}),e.jsx(q,{})]})},G=({product:s})=>{const{t}=x(),r=M(),{mutateAsync:a}=R(s.id),i=async()=>{await r({title:t("general.areYouSure"),description:t("products.deleteWarning",{title:s.title}),confirmText:t("actions.delete"),cancelText:t("actions.cancel")})&&await a(void 0,{onSuccess:()=>{p.success(t("products.toasts.delete.success.header"),{description:t("products.toasts.delete.success.description",{title:s.title})})},onError:o=>{p.error(t("products.toasts.delete.error.header"),{description:o.message})}})};return e.jsx(z,{groups:[{actions:[{icon:e.jsx(B,{}),label:t("actions.edit"),to:`/products/${s.id}/edit`}]},{actions:[{icon:e.jsx(K,{}),label:t("actions.delete"),onClick:i}]}]})},W=O(),Y=()=>{const s=v();return S.useMemo(()=>[...s,W.display({id:"actions",cell:({row:r})=>e.jsx(G,{product:r.original})})],[s])},ke=()=>e.jsxs("div",{className:"flex flex-col gap-y-2",children:[$.widgets.map((s,t)=>e.jsx("div",{children:e.jsx(s.Component,{})},t)),e.jsx(I,{}),_.widgets.map((s,t)=>e.jsx("div",{children:e.jsx(s.Component,{})},t))]});export{ke as Component,Ee as productLoader};
