import{C as f}from"./chunk-IWBW3RD4-B4qIHwJA.js";import{u as _,c as i}from"./chunk-MMJ4V5AR-M7tiWwVa.js";import{j as r,M as x,S as h,s as j,q as s,t as v}from"./index-7A3rjJyE.js";import{R as n}from"./chunk-BHGSRQH6-2xCUuk1R.js";import"./chunk-C7RYT3S3-C_x8NvOf.js";import"./_baseIsEqual-D9C7gzzJ.js";import"./folder-illustration-CD44GHLh.js";import"./dots-six-CFb9Rzcz.js";import"./chunk-YBHG7T6S-BleHOTgO.js";import"./chunk-DMYZ6SLX-BMyt3Z-P.js";import"./prompt-KZNvJYzq.js";import"./label-DDCdtDlT.js";var o={fields:"id,name,parent_category_id,rank,*category_children",parent_category_id:"null",include_descendants_tree:!0,limit:9999},C=()=>{const{product_categories:l,isPending:u,isError:d,error:c}=_(o),{mutateAsync:m,isPending:y}=x({mutationFn:async({value:e})=>{await j.admin.productCategory.update(e.id,{rank:e.rank??0,parent_category_id:e.parent_category_id})},onMutate:async e=>{await s.cancelQueries({queryKey:i.list(o)});const t=s.getQueryData(i.list(o)),a={...t,product_categories:e.arr};return s.setQueryData(i.list(o),a),{previousValue:t}},onError:(e,t,a)=>{s.setQueryData(i.list(o),a==null?void 0:a.previousValue),v.error(e.message)},onSettled:async(e,t,a)=>{await s.invalidateQueries({queryKey:i.lists()}),await s.invalidateQueries({queryKey:i.detail(a.value.id)})}}),p=async(e,t)=>{await m({value:e,arr:t})},g=u||y;if(d)throw c;return r.jsxs("div",{className:"flex h-full flex-col overflow-hidden",children:[r.jsx(n.Header,{children:r.jsx("div",{className:"flex items-center justify-end",children:g&&r.jsx(h,{className:"animate-spin"})})}),r.jsx(n.Body,{className:"bg-ui-bg-subtle flex flex-1 flex-col overflow-y-auto",children:r.jsx(f,{value:l||[],onChange:p})})]})},F=()=>r.jsx(n,{children:r.jsx(C,{})});export{F as Component};
