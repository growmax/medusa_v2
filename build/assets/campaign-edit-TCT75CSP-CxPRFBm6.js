import{u as f,v as _,cf as C,j as e,H as y,ci as v,t as j,I as m}from"./index-7A3rjJyE.js";import{a as i,u as E}from"./chunk-BHGSRQH6-2xCUuk1R.js";import{u as F,F as s}from"./chunk-C7RYT3S3-C_x8NvOf.js";import{t as b}from"./zod-DRKIF09R.js";import{o as S,s as x,d as p}from"./index-yuYasa5Y.js";import{D as u}from"./date-picker-foikjjE_.js";import{B as h}from"./label-DDCdtDlT.js";import"./prompt-KZNvJYzq.js";import"./clsx-B-dksMZM.js";import"./index-DFaNeppw.js";import"./x-mark-mini-Di7jARRp.js";var I=S({name:x(),description:x().optional(),campaign_identifier:x().optional(),starts_at:p().optional(),ends_at:p().optional()}),L=({campaign:n})=>{const{t}=f(),{handleSuccess:o}=E(),a=F({defaultValues:{name:n.name||"",description:n.description||"",campaign_identifier:n.campaign_identifier||"",starts_at:n.starts_at?new Date(n.starts_at):void 0,ends_at:n.ends_at?new Date(n.ends_at):void 0},resolver:b(I)}),{mutateAsync:l,isPending:d}=v(n.id),g=a.handleSubmit(async r=>{await l({name:r.name,description:r.description,campaign_identifier:r.campaign_identifier,starts_at:r.starts_at,ends_at:r.ends_at},{onSuccess:({campaign:c})=>{j.success(t("campaigns.edit.successToast",{name:c.name})),o()},onError:c=>{j.error(c.message)}})});return e.jsx(i.Form,{form:a,children:e.jsxs("form",{onSubmit:g,className:"flex flex-1 flex-col",children:[e.jsx(i.Body,{children:e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsx(s.Field,{control:a.control,name:"name",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:t("fields.name")}),e.jsx(s.Control,{children:e.jsx(m,{...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:a.control,name:"description",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:t("fields.description")}),e.jsx(s.Control,{children:e.jsx(m,{...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:a.control,name:"campaign_identifier",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:t("campaigns.fields.identifier")}),e.jsx(s.Control,{children:e.jsx(m,{...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:a.control,name:"starts_at",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:t("campaigns.fields.start_date")}),e.jsx(s.Control,{children:e.jsx(u,{granularity:"minute",hourCycle:12,shouldCloseOnSelect:!1,...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:a.control,name:"ends_at",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:t("campaigns.fields.end_date")}),e.jsx(s.Control,{children:e.jsx(u,{granularity:"minute",shouldCloseOnSelect:!1,...r})}),e.jsx(s.ErrorMessage,{})]})})]})}),e.jsx(i.Footer,{children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(i.Close,{asChild:!0,children:e.jsx(h,{variant:"secondary",size:"small",children:t("actions.cancel")})}),e.jsx(h,{isLoading:d,type:"submit",variant:"primary",size:"small",children:t("actions.save")})]})})]})})},k=()=>{const{t:n}=f(),{id:t}=_(),{campaign:o,isLoading:a,isError:l,error:d}=C(t);if(l)throw d;return e.jsxs(i,{children:[e.jsx(i.Header,{children:e.jsx(y,{children:n("campaigns.edit.header")})}),!a&&o&&e.jsx(L,{campaign:o})]})};export{k as Component};
