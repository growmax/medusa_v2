import{ck as L,u as y,j as e,H as F,aN as j,cl as I,t as u,I as p}from"./index-7A3rjJyE.js";import{a as l,u as E}from"./chunk-BHGSRQH6-2xCUuk1R.js";import{u as S,F as s}from"./chunk-C7RYT3S3-C_x8NvOf.js";import{t as w}from"./zod-DRKIF09R.js";import{o as H,s as g,b as T}from"./index-yuYasa5Y.js";import{T as M}from"./Trans-Cyi6soNY.js";import{S as c}from"./select-cXhfXDq8.js";import{S as P}from"./switch-DDIyRuzh.js";import{B as f}from"./label-DDCdtDlT.js";import"./prompt-KZNvJYzq.js";import"./index-dBm6oMZZ.js";import"./triangles-mini-JWkpofVU.js";var k=H({first_name:g().optional(),last_name:g().optional(),language:g(),usage_insights:T()}),z=({user:i,usageInsights:h})=>{const{t:r,i18n:d}=y(),{handleSuccess:x}=E(),t=S({defaultValues:{first_name:i.first_name??"",last_name:i.last_name??"",language:d.language,usage_insights:h},resolver:w(k)}),_=async a=>{await d.changeLanguage(a)},v=j.sort((a,n)=>a.display_name.localeCompare(n.display_name)),{mutateAsync:b,isPending:C}=I(i.id),N=t.handleSubmit(async a=>{try{await b({first_name:a.first_name,last_name:a.last_name}),await _(a.language),u.success(r("profile.toast.edit")),x()}catch(n){u.error(n.message)}});return e.jsx(l.Form,{form:t,children:e.jsxs("form",{onSubmit:N,className:"flex flex-1 flex-col",children:[e.jsx(l.Body,{children:e.jsxs("div",{className:"flex flex-col gap-y-8",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(s.Field,{control:t.control,name:"first_name",render:({field:a})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:r("fields.firstName")}),e.jsx(s.Control,{children:e.jsx(p,{...a})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:t.control,name:"last_name",render:({field:a})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:r("fields.lastName")}),e.jsx(s.Control,{children:e.jsx(p,{...a})}),e.jsx(s.ErrorMessage,{})]})})]}),e.jsx(s.Field,{control:t.control,name:"language",render:({field:{ref:a,...n}})=>{var m;return e.jsxs(s.Item,{className:"gap-y-4",children:[e.jsxs("div",{children:[e.jsx(s.Label,{children:r("profile.fields.languageLabel")}),e.jsx(s.Hint,{children:r("profile.edit.languageHint")})]}),e.jsxs("div",{children:[e.jsx(s.Control,{children:e.jsxs(c,{...n,onValueChange:n.onChange,children:[e.jsx(c.Trigger,{ref:a,className:"py-1 text-[13px]",children:e.jsx(c.Value,{placeholder:r("profile.edit.languagePlaceholder"),children:(m=v.find(o=>o.code===n.value))==null?void 0:m.display_name})}),e.jsx(c.Content,{children:j.map(o=>e.jsx(c.Item,{value:o.code,children:o.display_name},o.code))})]})}),e.jsx(s.ErrorMessage,{})]})]})}}),e.jsx(s.Field,{control:t.control,name:"usage_insights",render:({field:{value:a,onChange:n,...m}})=>e.jsxs(s.Item,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(s.Label,{children:r("profile.fields.usageInsightsLabel")}),e.jsx(s.Control,{children:e.jsx(P,{...m,checked:a,onCheckedChange:n})})]}),e.jsx(s.Hint,{children:e.jsx("span",{children:e.jsx(M,{i18nKey:"profile.edit.usageInsightsHint",components:[e.jsx("a",{className:"text-ui-fg-interactive hover:text-ui-fg-interactive-hover transition-fg underline",href:"https://medusa-resources-git-docs-v2-medusajs.vercel.app/resources/usage#admin-analytics",target:"_blank",rel:"noopener noreferrer"},"hint-link")]})})}),e.jsx(s.ErrorMessage,{})]})})]})}),e.jsx(l.Footer,{children:e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(l.Close,{asChild:!0,children:e.jsx(f,{size:"small",variant:"secondary",children:r("actions.cancel")})}),e.jsx(f,{size:"small",type:"submit",isLoading:C,children:r("actions.save")})]})})]})})},Q=()=>{const{user:i,isPending:h,isError:r,error:d}=L(),{t:x}=y();if(r)throw d;return e.jsxs(l,{children:[e.jsx(l.Header,{className:"capitalize",children:e.jsx(F,{children:x("profile.edit.header")})}),!h&&i&&e.jsx(z,{user:i,usageInsights:!1})]})};export{Q as Component};
