import{a as v}from"./chunk-OIW3F4EQ-D8V0uZdG.js";import{A as x}from"./chunk-WRXTMI2J-CygmDunM.js";import{u as g,D as b}from"./chunk-MOFW5DA3-Byx5Qi5u.js";import{j as t,O as j,u as p,C as k,H as _,T as N,L as w,r as q}from"./index-7A3rjJyE.js";import"./lodash-8s6kkRaG.js";import{P as m}from"./chunk-P3UUX2T6-Bigsa15J.js";import{u as T}from"./chunk-C76H5USB-qWdDTOoY.js";import"./chunk-7LAPOKHJ-BtMb3RyP.js";import"./chunk-M566SHKI-Cmdx6k9x.js";import{u as I,c as S}from"./chunk-DMYZ6SLX-BMyt3Z-P.js";import{P}from"./pencil-square-mUSTT5rR.js";import{T as z}from"./trash-C_lucST6.js";import{u as C}from"./use-prompt-iL3FbEo4.js";import{B as O}from"./label-DDCdtDlT.js";import{c as L}from"./index-DL2eSRCZ.js";import"./chunk-5FUV23JF-QRqJ2E8j.js";import"./chunk-RKBIB2RM-jqr0zPdv.js";import"./chunk-WX2SMNCD-D4nWbVrW.js";import"./plus-mini-BHxdUq8n.js";import"./command-bar-DBncXrlJ.js";import"./index-DFaNeppw.js";import"./chunk-QAF7PVQE-exoP4XGT.js";import"./format-CkWRMO1y.js";import"./_baseIsEqual-D9C7gzzJ.js";import"./date-picker-foikjjE_.js";import"./clsx-B-dksMZM.js";import"./x-mark-mini-Di7jARRp.js";import"./prompt-KZNvJYzq.js";var A=({item:s})=>{const{t:i}=p(),e=C(),{mutateAsync:n}=S(s.id),a=async()=>{await e({title:i("general.areYouSure"),description:i("inventory.deleteWarning"),confirmText:i("actions.delete"),cancelText:i("actions.cancel")})&&await n()};return t.jsx(x,{groups:[{actions:[{icon:t.jsx(P,{}),label:i("actions.edit"),to:`${s.id}/edit`}]},{actions:[{icon:t.jsx(z,{}),label:i("actions.delete"),onClick:a}]}]})},l=L(),D=()=>{const{t:s}=p();return q.useMemo(()=>[l.accessor("title",{header:s("fields.title"),cell:({getValue:i})=>{const e=i();return e?t.jsx("div",{className:"flex size-full items-center overflow-hidden",children:t.jsx("span",{className:"truncate",children:e})}):t.jsx(m,{})}}),l.accessor("sku",{header:s("fields.sku"),cell:({getValue:i})=>{const e=i();return e?t.jsx("div",{className:"flex size-full items-center overflow-hidden",children:t.jsx("span",{className:"truncate",children:e})}):t.jsx(m,{})}}),l.accessor("reserved_quantity",{header:s("inventory.reserved"),cell:({getValue:i})=>{const e=i();return Number.isNaN(e)?t.jsx(m,{}):t.jsx("div",{className:"flex size-full items-center overflow-hidden",children:t.jsx("span",{className:"truncate",children:e})})}}),l.accessor("stocked_quantity",{header:s("fields.inStock"),cell:({getValue:i})=>{const e=i();return Number.isNaN(e)?t.jsx(m,{}):t.jsx("div",{className:"flex size-full items-center overflow-hidden",children:t.jsx("span",{className:"truncate",children:e})})}}),l.display({id:"actions",cell:({row:i})=>t.jsx(A,{item:i.original})})],[s])},E=()=>{const{t:s}=p(),{stock_locations:i}=v({limit:1e3}),e=[];if(i){const n={type:"select",options:i.map(a=>({label:a.name,value:a.id})),key:"location_id",searchable:!0,label:s("fields.location")};e.push(n)}return e.push({type:"string",key:"material",label:s("fields.material")}),e.push({type:"string",key:"sku",label:s("fields.sku")}),e.push({type:"string",key:"mid_code",label:s("fields.midCode")}),e.push({type:"number",key:"height",label:s("fields.height")}),e.push({type:"number",key:"width",label:s("fields.width")}),e.push({type:"number",key:"length",label:s("fields.length")}),e.push({type:"number",key:"weight",label:s("fields.weight")}),e.push({type:"select",options:[{label:s("fields.true"),value:"true"},{label:s("fields.false"),value:"false"}],key:"requires_shipping",multiple:!1,label:s("fields.requiresShipping")}),e},J=({pageSize:s=20,prefix:i})=>{const e=T(["id","location_id","q","order","requires_shipping","offset","sku","origin_country","material","mid_code","hs_code","order","weight","width","length","height"],i),{offset:n,weight:a,width:o,length:c,height:d,requires_shipping:u,...r}=e;return{searchParams:{limit:s,offset:n?parseInt(n):void 0,weight:a?JSON.parse(a):void 0,width:o?JSON.parse(o):void 0,length:c?JSON.parse(c):void 0,height:d?JSON.parse(d):void 0,requires_shipping:u?JSON.parse(u):void 0,q:r.q,sku:r.sku,order:r.order,mid_code:r.mid_code,hs_code:r.hs_code,material:r.material,location_levels:{location_id:r.location_id||[]},id:r.id?r.id.split(","):void 0},raw:e}},f=20,H=()=>{const{t:s}=p(),{searchParams:i,raw:e}=J({pageSize:f}),{inventory_items:n,count:a,isPending:o,isError:c,error:d}=I({...i}),u=E(),r=D(),{table:y}=g({data:n??[],columns:r,count:a,enablePagination:!0,getRowId:h=>h.id,pageSize:f});if(c)throw d;return t.jsxs(k,{className:"divide-y p-0",children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[t.jsxs("div",{children:[t.jsx(_,{children:s("inventory.domain")}),t.jsx(N,{className:"text-ui-fg-subtle",size:"small",children:s("inventory.subtitle")})]}),t.jsx(O,{size:"small",variant:"secondary",asChild:!0,children:t.jsx(w,{to:"create",children:s("actions.create")})})]}),t.jsx(b,{table:y,columns:r,pageSize:f,count:a,isLoading:o,pagination:!0,search:!0,filters:u,queryObject:e,orderBy:["title","sku","stocked_quantity","reserved_quantity"],navigateTo:h=>`${h.id}`})]})},he=()=>t.jsxs("div",{className:"flex flex-col gap-y-2",children:[t.jsx(H,{}),t.jsx(j,{})]});export{he as Component};
