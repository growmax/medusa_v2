import{r as i,bu as v,X as D,bv as x,k as g}from"./index-7A3rjJyE.js";var q=()=>{const[n,a]=i.useState(""),[s,t]=i.useState(""),r=i.useCallback(v(c=>t(c),300),[]);return i.useEffect(()=>(r(n),()=>r.cancel()),[n,r]),{searchValue:n,onSearchValueChange:a,query:s||void 0}},E=({queryKey:n,queryFn:a,getOptions:s,defaultValue:t,defaultValueKey:r,pageSize:c=10})=>{const{searchValue:d,onSearchValueChange:f,query:m}=q(),l=r||"id",{data:y}=D({queryKey:n,queryFn:async()=>a({[l]:t,limit:Array.isArray(t)?t.length:1}),enabled:!!t}),{data:u,...b}=x({queryKey:[...n,m],queryFn:async({pageParam:e=0})=>await a({q:m,limit:c,offset:e}),initialPageParam:0,getNextPageParam:e=>e.count>e.offset+e.limit?e.offset+e.limit:void 0,placeholderData:g}),o=(u==null?void 0:u.pages.flatMap(e=>s(e)))??[],h=y?s(y):[],p=!b.isPending&&!o.length&&!d;return t&&h.length&&!o.find(e=>e.value===t)&&o.unshift(h[0]),{options:o,searchValue:d,onSearchValueChange:f,disabled:p,...b}};export{q as a,E as u};
