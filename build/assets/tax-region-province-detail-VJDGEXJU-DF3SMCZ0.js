import{a as f,b as v,T as R,u as h,c as y,d as T}from"./before-CoQTlsvP.js";import{T as j}from"./chunk-XIMVTANT-biTHDTmX.js";import{v as b,h as D,cH as _,j as a,q as p,u as m,C as d,x as P,B as S,H as q,cF as w,s as O,k as C}from"./index-7A3rjJyE.js";import{S as E}from"./chunk-FGHVNTU2-HfmduO2_.js";import"./chunk-3IW4HYUP-C89ww9p0.js";import{a as L}from"./chunk-DBDBBAQF-CuodlkG0.js";import"./lodash-8s6kkRaG.js";import"./chunk-C76H5USB-qWdDTOoY.js";import"./chunk-VNYVDWWH-BElGsP_6.js";import"./chunk-7TY4Y7TY-B3QhHT0B.js";import"./chunk-YBHG7T6S-BleHOTgO.js";import"./chunk-DMYZ6SLX-BMyt3Z-P.js";import"./chunk-YVTBRLIE-C161Iqr5.js";import"./chunk-RYVWLLZ2-BlkKIhzO.js";import"./chunk-WRXTMI2J-CygmDunM.js";import"./chunk-OPYB3EPU-B_-LG2wj.js";import"./chunk-5FUV23JF-QRqJ2E8j.js";import"./chunk-RKBIB2RM-jqr0zPdv.js";import"./label-DDCdtDlT.js";import"./chunk-WX2SMNCD-D4nWbVrW.js";import"./plus-mini-BHxdUq8n.js";import"./index-DL2eSRCZ.js";import"./pencil-square-mUSTT5rR.js";import"./trash-C_lucST6.js";import"./arrow-down-right-mini-XNsj1UGy.js";import"./status-badge-BK5p0WUV.js";import"./chunk-EQTBJSBZ-b_1V6fJN.js";import"./react-country-flag.esm-unq-jaIv.js";import"./plus-o2nCfN-i.js";import"./use-prompt-iL3FbEo4.js";import"./prompt-KZNvJYzq.js";import"./arrow-up-right-on-box-CF7GLQ-o.js";import"./Trans-Cyi6soNY.js";import"./x-mark-mini-Di7jARRp.js";import"./triangle-down-mini-BHNqpDM0.js";import"./square-two-stack-Ao9P_yLE.js";var Q=({taxRegion:r})=>{const{t}=m(),e=r.tax_rates.filter(i=>i.is_default===!0),o=e.length===0;return a.jsxs(d,{className:"divide-y p-0",children:[a.jsx(j,{taxRegion:r,type:"header",asLink:!1,badge:o&&a.jsx(P,{content:t("taxRegions.fields.noDefaultRate.tooltip"),children:a.jsx(S,{color:"orange",size:"2xsmall",className:"cursor-default",children:t("taxRegions.fields.noDefaultRate.label")})})}),e.map(i=>a.jsx(R,{taxRate:i,isSublevelTaxRate:!0},i.id))]})},l=10,n="o",k=({taxRegion:r})=>{const{t}=m(),{searchParams:e,raw:o}=h({pageSize:l,prefix:n}),{tax_rates:i,count:s,isPending:c,isError:x,error:u}=L({...e,tax_region_id:r.id,is_default:!1},{placeholderData:C}),{table:g}=y({count:s,data:i,pageSize:l,prefix:n});if(x)throw u;return a.jsx(d,{className:"p-0",children:a.jsx(T,{isPending:c,table:g,count:s,action:{label:t("actions.create"),to:"overrides/create"},queryObject:o,prefix:n,children:a.jsx(q,{level:"h2",children:t("taxRegions.taxOverrides.header")})})})},he=()=>{const{province_id:r}=b(),t=D(),{tax_region:e,isLoading:o,isError:i,error:s}=_(r,void 0,{initialData:t});if(o||!e)return a.jsx("div",{children:"Loading..."});if(i)throw s;return a.jsxs(E,{data:e,showJSON:!0,hasOutlet:!0,widgets:{after:f,before:v},children:[a.jsx(Q,{taxRegion:e}),a.jsx(k,{taxRegion:e})]})},N=r=>({queryKey:w.detail(r),queryFn:async()=>O.admin.taxRegion.retrieve(r)}),ye=async({params:r})=>{const t=r.province_id,e=N(t);return p.getQueryData(e.queryKey)??await p.fetchQuery(e)};export{he as Component,he as TaxRegionDetail,ye as loader};
