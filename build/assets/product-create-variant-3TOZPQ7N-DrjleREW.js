import{C as H}from"./chunk-FLW5D3SP-2BTcEG50.js";import{C as z}from"./chunk-UY4EBCIZ-D3QWhMGG.js";import{o as u}from"./chunk-Y2QXUTMB-CYOiJYmV.js";import{c as B}from"./chunk-6GU6IDUA-CDc7wW5L.js";import{v as V,u as C,j as e,H as g,I as l,D as b,r as D}from"./index-7A3rjJyE.js";import{d as R,l as O}from"./chunk-YBHG7T6S-BleHOTgO.js";import{a as x,u as $}from"./chunk-BHGSRQH6-2xCUuk1R.js";import{u as T,F as r}from"./chunk-C7RYT3S3-C_x8NvOf.js";import{t as q}from"./zod-DRKIF09R.js";import{z as t}from"./index-yuYasa5Y.js";import{S as v}from"./switch-DDIyRuzh.js";import{B as y}from"./label-DDCdtDlT.js";import"./triangles-mini-JWkpofVU.js";import"./x-mark-mini-Di7jARRp.js";import"./plus-mini-BHxdUq8n.js";import"./chunk-DMYZ6SLX-BMyt3Z-P.js";import"./prompt-KZNvJYzq.js";import"./index-dBm6oMZZ.js";var A=t.object({title:t.string().min(1),material:t.string().optional(),sku:t.string().optional(),ean:t.string().optional(),upc:t.string().optional(),barcode:t.string().optional(),manage_inventory:t.boolean(),allow_backorder:t.boolean(),weight:u,height:u,width:u,length:u,mid_code:t.string().optional(),hs_code:t.string().optional(),origin_country:t.string().optional(),options:t.record(t.string())}),G=({product:h,isStockAndInventoryEnabled:m=!1})=>{const{t:n}=C(),{handleSuccess:p}=$(),o=T({defaultValues:{manage_inventory:!0,allow_backorder:!1,options:{}},resolver:q(A)}),{mutateAsync:f,isPending:w}=O(h.id),F=o.handleSubmit(async s=>{const i=j=>{if(!(typeof j>"u"||j===""))return typeof j=="string"?B(j):j},{weight:a,height:c,width:d,length:I,allow_backorder:L,manage_inventory:E,sku:M,ean:_,upc:k,barcode:N,...P}=s,S=m?{}:{sku:M,ean:_,upc:k,barcode:N,allow_backorder:L,manage_inventory:E};await f({weight:i(a),height:i(c),width:i(d),length:i(I),prices:[],...S,...P},{onSuccess:()=>{p()}})});return e.jsx(x.Form,{form:o,children:e.jsxs("form",{onSubmit:F,className:"flex size-full flex-col overflow-hidden",children:[e.jsxs(x.Body,{className:"flex size-full flex-col gap-y-8 overflow-auto",children:[e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsx(r.Field,{control:o.control,name:"title",render:({field:s})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{children:n("fields.title")}),e.jsx(r.Control,{children:e.jsx(l,{...s})}),e.jsx(r.ErrorMessage,{})]})}),h.options.map(s=>e.jsx(r.Field,{control:o.control,name:`options.${s.title}`,render:({field:{value:i,onChange:a,...c}})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{children:s.title}),e.jsx(r.Control,{children:e.jsx(z,{value:i,onChange:d=>{a(d)},...c,options:s.values.map(d=>({label:d.value,value:d.value}))})})]})},s.id))]}),e.jsx(b,{}),!m&&e.jsxs(D.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsx(g,{level:"h2",children:n("products.variant.inventory.header")}),e.jsx(r.Field,{control:o.control,name:"sku",render:({field:s})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{optional:!0,children:n("fields.sku")}),e.jsx(r.Control,{children:e.jsx(l,{...s})}),e.jsx(r.ErrorMessage,{})]})}),e.jsx(r.Field,{control:o.control,name:"ean",render:({field:s})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{optional:!0,children:n("fields.ean")}),e.jsx(r.Control,{children:e.jsx(l,{...s})}),e.jsx(r.ErrorMessage,{})]})}),e.jsx(r.Field,{control:o.control,name:"upc",render:({field:s})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{optional:!0,children:n("fields.upc")}),e.jsx(r.Control,{children:e.jsx(l,{...s})}),e.jsx(r.ErrorMessage,{})]})}),e.jsx(r.Field,{control:o.control,name:"barcode",render:({field:s})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{optional:!0,children:n("fields.barcode")}),e.jsx(r.Control,{children:e.jsx(l,{...s})}),e.jsx(r.ErrorMessage,{})]})})]}),e.jsx(r.Field,{control:o.control,name:"manage_inventory",render:({field:{value:s,onChange:i,...a}})=>e.jsxs(r.Item,{children:[e.jsxs("div",{className:"flex flex-col gap-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r.Label,{children:n("products.variant.inventory.manageInventoryLabel")}),e.jsx(r.Control,{children:e.jsx(v,{checked:s,onCheckedChange:c=>i(!!c),...a})})]}),e.jsx(r.Hint,{children:n("products.variant.inventory.manageInventoryHint")})]}),e.jsx(r.ErrorMessage,{})]})}),e.jsx(r.Field,{control:o.control,name:"allow_backorder",render:({field:{value:s,onChange:i,...a}})=>e.jsxs(r.Item,{children:[e.jsxs("div",{className:"flex flex-col gap-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r.Label,{children:n("products.variant.inventory.allowBackordersLabel")}),e.jsx(r.Control,{children:e.jsx(v,{checked:s,onCheckedChange:c=>i(!!c),...a})})]}),e.jsx(r.Hint,{children:n("products.variant.inventory.allowBackordersHint")})]}),e.jsx(r.ErrorMessage,{})]})})]}),e.jsx(b,{})]}),e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsx(g,{level:"h2",children:n("products.attributes")}),e.jsx(r.Field,{control:o.control,name:"material",render:({field:s})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{optional:!0,children:n("fields.material")}),e.jsx(r.Control,{children:e.jsx(l,{...s})}),e.jsx(r.ErrorMessage,{})]})}),e.jsx(r.Field,{control:o.control,name:"weight",render:({field:s})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{optional:!0,children:n("fields.weight")}),e.jsx(r.Control,{children:e.jsx(l,{type:"number",...s})}),e.jsx(r.ErrorMessage,{})]})}),e.jsx(r.Field,{control:o.control,name:"width",render:({field:s})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{optional:!0,children:n("fields.width")}),e.jsx(r.Control,{children:e.jsx(l,{type:"number",...s})}),e.jsx(r.ErrorMessage,{})]})}),e.jsx(r.Field,{control:o.control,name:"length",render:({field:s})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{optional:!0,children:n("fields.length")}),e.jsx(r.Control,{children:e.jsx(l,{type:"number",...s})}),e.jsx(r.ErrorMessage,{})]})}),e.jsx(r.Field,{control:o.control,name:"height",render:({field:s})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{optional:!0,children:n("fields.height")}),e.jsx(r.Control,{children:e.jsx(l,{type:"number",...s})}),e.jsx(r.ErrorMessage,{})]})}),e.jsx(r.Field,{control:o.control,name:"mid_code",render:({field:s})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{optional:!0,children:n("fields.midCode")}),e.jsx(r.Control,{children:e.jsx(l,{...s})}),e.jsx(r.ErrorMessage,{})]})}),e.jsx(r.Field,{control:o.control,name:"hs_code",render:({field:s})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{optional:!0,children:n("fields.hsCode")}),e.jsx(r.Control,{children:e.jsx(l,{...s})}),e.jsx(r.ErrorMessage,{})]})}),e.jsx(r.Field,{control:o.control,name:"origin_country",render:({field:s})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{optional:!0,children:n("fields.countryOfOrigin")}),e.jsx(r.Control,{children:e.jsx(H,{...s})}),e.jsx(r.ErrorMessage,{})]})})]})]}),e.jsx(x.Footer,{children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(x.Close,{asChild:!0,children:e.jsx(y,{variant:"secondary",size:"small",children:n("actions.cancel")})}),e.jsx(y,{type:"submit",size:"small",isLoading:w,children:n("actions.save")})]})})]})})},de=()=>{const{id:h}=V(),{t:m}=C(),{product:n,isLoading:p,isError:o,error:f}=R(h);if(o)throw f;return e.jsxs(x,{children:[e.jsx(x.Header,{children:e.jsx(g,{children:m("products.variant.create.header")})}),!p&&n&&e.jsx(G,{product:n})]})};export{de as Component};
